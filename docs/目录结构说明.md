# ç›®å½•ç»“æ„è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œå„ä¸ªæ–‡ä»¶çš„ä½œç”¨ã€‚

## ğŸ“ å®Œæ•´ç›®å½•ç»“æ„

```
Client_MCP_Demo/
â”œâ”€â”€ src/                      # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ clients/             # å®¢æˆ·ç«¯å®ç°
â”‚   â”‚   â”œâ”€â”€ anthropic.ts     # Anthropic Claude å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ openai.ts        # OpenAI GPT å®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ mock.ts          # æ¨¡æ‹Ÿå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts         # é€šç”¨ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚       â””â”€â”€ index.ts         # å·¥å…·å‡½æ•°å®ç°
â”œâ”€â”€ dist/                    # ç¼–è¯‘è¾“å‡ºç›®å½•
â”‚   â”œâ”€â”€ clients/             # ç¼–è¯‘åçš„å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ types/               # ç¼–è¯‘åçš„ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ utils/               # ç¼–è¯‘åçš„å·¥å…·å‡½æ•°
â”œâ”€â”€ examples/                # ç¤ºä¾‹æ–‡ä»¶
â”‚   â””â”€â”€ simple-mcp-server.js # ç¤ºä¾‹ MCP æœåŠ¡å™¨
â”œâ”€â”€ scripts/                 # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ test-mock.sh         # æ¨¡æ‹Ÿç‰ˆæœ¬æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ test-openai.sh       # OpenAI ç‰ˆæœ¬æµ‹è¯•è„šæœ¬
â”œâ”€â”€ docs/                    # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ æµ‹è¯•è¯´æ˜.md         # è¯¦ç»†çš„æµ‹è¯•è¯´æ˜
â”‚   â””â”€â”€ ç›®å½•ç»“æ„è¯´æ˜.md     # æœ¬æ–‡æ¡£
â”œâ”€â”€ package.json             # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ package-lock.json        # ä¾èµ–ç‰ˆæœ¬é”å®š
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”œâ”€â”€ .gitignore               # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ LICENSE                  # MIT è®¸å¯è¯
â””â”€â”€ README.md                # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ“‹ å„ç›®å½•è¯¦ç»†è¯´æ˜

### `src/` - æºä»£ç ç›®å½•

åŒ…å«æ‰€æœ‰ TypeScript æºä»£ç æ–‡ä»¶ã€‚

#### `src/clients/` - å®¢æˆ·ç«¯å®ç°

- **anthropic.ts**: Anthropic Claude API å®¢æˆ·ç«¯
  - ä½¿ç”¨ `claude-3-5-sonnet-20241022` æ¨¡å‹
  - éœ€è¦ `ANTHROPIC_API_KEY` ç¯å¢ƒå˜é‡
  - ç»§æ‰¿è‡ª `MCPClientBase` æŠ½è±¡ç±»

- **openai.ts**: OpenAI GPT API å®¢æˆ·ç«¯
  - ä½¿ç”¨ `gpt-3.5-turbo` æ¨¡å‹
  - éœ€è¦ `OPENAI_API_KEY` ç¯å¢ƒå˜é‡
  - ç»§æ‰¿è‡ª `MCPClientBase` æŠ½è±¡ç±»

- **mock.ts**: æ¨¡æ‹Ÿå®¢æˆ·ç«¯
  - æ— éœ€ API å¯†é’¥
  - ç”Ÿæˆæ¨¡æ‹Ÿå“åº”å’Œå·¥å…·è°ƒç”¨
  - é€‚ç”¨äºæµ‹è¯•å’Œå­¦ä¹ 

#### `src/types/` - ç±»å‹å®šä¹‰

- **index.ts**: é€šç”¨ç±»å‹å®šä¹‰
  - `MCPTool`: MCP å·¥å…·æ¥å£
  - `MCPClientConfig`: å®¢æˆ·ç«¯é…ç½®æ¥å£
  - `MCPClientBase`: æŠ½è±¡å®¢æˆ·ç«¯åŸºç±»
  - å…¶ä»–é€šç”¨ç±»å‹å®šä¹‰

#### `src/utils/` - å·¥å…·å‡½æ•°

- **index.ts**: å·¥å…·å‡½æ•°å®ç°
  - `getScriptCommand()`: è·å–è„šæœ¬è¿è¡Œå‘½ä»¤
  - `validateApiKey()`: éªŒè¯ API å¯†é’¥
  - `generateMockArgs()`: ç”Ÿæˆæ¨¡æ‹Ÿå‚æ•°
  - `createRandomResponse()`: åˆ›å»ºéšæœºå“åº”
  - å…¶ä»–å®ç”¨å·¥å…·å‡½æ•°

### `dist/` - ç¼–è¯‘è¾“å‡ºç›®å½•

åŒ…å«ç”± TypeScript ç¼–è¯‘å™¨ç”Ÿæˆçš„ JavaScript æ–‡ä»¶ã€ç±»å‹å£°æ˜æ–‡ä»¶å’Œæºç æ˜ å°„æ–‡ä»¶ã€‚

### `examples/` - ç¤ºä¾‹æ–‡ä»¶

- **simple-mcp-server.js**: ç¤ºä¾‹ MCP æœåŠ¡å™¨
  - æä¾› 4 ä¸ªåŸºæœ¬å·¥å…·ï¼šechoã€addã€current_timeã€random_number
  - æ¼”ç¤ºå¦‚ä½•åˆ›å»º MCP æœåŠ¡å™¨
  - å¯ç”¨äºæµ‹è¯•å®¢æˆ·ç«¯åŠŸèƒ½

### `scripts/` - è„šæœ¬ç›®å½•

- **test-mock.sh**: æ¨¡æ‹Ÿç‰ˆæœ¬æµ‹è¯•è„šæœ¬
  - è‡ªåŠ¨æ£€æŸ¥ç¼–è¯‘çŠ¶æ€
  - å¯åŠ¨æ¨¡æ‹Ÿå®¢æˆ·ç«¯
  - æä¾›ä½¿ç”¨æç¤º

- **test-openai.sh**: OpenAI ç‰ˆæœ¬æµ‹è¯•è„šæœ¬
  - æ£€æŸ¥ API å¯†é’¥ç¯å¢ƒå˜é‡
  - å¯åŠ¨ OpenAI å®¢æˆ·ç«¯
  - æä¾›ä½¿ç”¨æç¤º

### `docs/` - æ–‡æ¡£ç›®å½•

- **æµ‹è¯•è¯´æ˜.md**: è¯¦ç»†çš„æµ‹è¯•è¯´æ˜
- **ç›®å½•ç»“æ„è¯´æ˜.md**: æœ¬æ–‡æ¡£

## ğŸ”§ é‡è¦é…ç½®æ–‡ä»¶

### `package.json`

å®šä¹‰é¡¹ç›®ä¾èµ–ã€è„šæœ¬å’Œå…ƒæ•°æ®ï¼š

```json
{
  "scripts": {
    "build": "tsc",
    "clean": "rm -rf dist",
    "start": "node dist/clients/anthropic.js",
    "start:openai": "node dist/clients/openai.js",
    "start:mock": "node dist/clients/mock.js",
    "test:mock": "./scripts/test-mock.sh",
    "test:openai": "./scripts/test-openai.sh"
  }
}
```

### `tsconfig.json`

TypeScript ç¼–è¯‘é…ç½®ï¼š

```json
{
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src",
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "examples", "scripts"]
}
```

### `.gitignore`

Git å¿½ç•¥æ–‡ä»¶é…ç½®ï¼Œå¿½ç•¥ï¼š
- `node_modules/` - ä¾èµ–åŒ…
- `dist/` - ç¼–è¯‘è¾“å‡º
- `.env*` - ç¯å¢ƒå˜é‡æ–‡ä»¶
- å…¶ä»–ä¸´æ—¶æ–‡ä»¶

## ğŸš€ å¼€å‘å·¥ä½œæµ

1. **å¼€å‘**: åœ¨ `src/` ç›®å½•ä¸­ç¼–å†™ TypeScript ä»£ç 
2. **ç¼–è¯‘**: è¿è¡Œ `npm run build` ç¼–è¯‘åˆ° `dist/` ç›®å½•
3. **æµ‹è¯•**: ä½¿ç”¨ `scripts/` ç›®å½•ä¸­çš„è„šæœ¬è¿›è¡Œæµ‹è¯•
4. **éƒ¨ç½²**: ä½¿ç”¨ `dist/` ç›®å½•ä¸­çš„ç¼–è¯‘åæ–‡ä»¶

## ğŸ“ æ–‡ä»¶å‘½åçº¦å®š

- TypeScript æºæ–‡ä»¶ï¼šå°å†™å­—æ¯ï¼Œä½¿ç”¨ç ´æŠ˜å·åˆ†éš”
- ç¼–è¯‘åçš„æ–‡ä»¶ï¼šä¸æºæ–‡ä»¶åŒåï¼Œæ‰©å±•åä¸º `.js`
- ç±»å‹å£°æ˜æ–‡ä»¶ï¼šä¸æºæ–‡ä»¶åŒåï¼Œæ‰©å±•åä¸º `.d.ts`
- æµ‹è¯•è„šæœ¬ï¼š`test-` å‰ç¼€ï¼Œ`.sh` æ‰©å±•å
- æ–‡æ¡£æ–‡ä»¶ï¼šä¸­æ–‡åç§°ï¼Œ`.md` æ‰©å±•å

## ğŸ”„ ç›®å½•ç»“æ„ä¼˜åŠ¿

1. **æ¨¡å—åŒ–**: æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ï¼Œæ˜“äºç»´æŠ¤
2. **å¯æ‰©å±•**: æ˜“äºæ·»åŠ æ–°çš„å®¢æˆ·ç«¯æˆ–å·¥å…·å‡½æ•°
3. **ç±»å‹å®‰å…¨**: é›†ä¸­çš„ç±»å‹å®šä¹‰ï¼Œä¿è¯ç±»å‹ä¸€è‡´æ€§
4. **æµ‹è¯•å‹å¥½**: ç‹¬ç«‹çš„æµ‹è¯•è„šæœ¬å’Œç¤ºä¾‹æ–‡ä»¶
5. **æ–‡æ¡£å®Œæ•´**: è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜
6. **æ ‡å‡†åŒ–**: ç¬¦åˆ Node.js é¡¹ç›®çš„æ ‡å‡†ç»“æ„ 